<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Bootstrap Core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/css/style.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="pull-right" >
              <ul id="items" class="list-group">
                <li class="list-group-item" >List of Appliances</li>
              </ul>
          </div>
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Choose Your appliances</a>
                <div style="display:block; float:right">
                  <div >
                <h3>Total Power</h1>
                <h3 id = "total_power" style="color:blue">0 Watts</h3>
              </div> <br>
              <div >
                <h3 >Your Solar panel rating in watts</h1>
                <h3 id = "total_rating" style="color:blue">{{Power}} Watts</h3>
              </div>
              </div>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Content -->
    <div class="container" style="margin-top:25%">

        <!-- Page Header -->
        <div class="row">
            <div class="col-lg-12">
            </div>
        </div>
        <!-- /.row -->

        <!-- Projects Row -->
        <div class="row">

            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/dryer.png" alt="">
                </a>
                <h3>
                    <a rel="1" href="#">Drilling Tool</a>
                </h3>
                <p rel="1">Power: 1000W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button'  onclick="Decrease(1)" value='-' class='qtyminus' field='quantity' />
                            <input type='text' rel="1" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' onclick="Increase(1)" class='qtyplus' field='quantity' />
                        </form>
                    </p>
                </span>
            </div>

            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/laptop.png" alt="">
                </a>
                <h3>
                    <a rel="2" href="#">Laptop</a>
                </h3>
                <p rel="2">Power: 1000W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' onclick="Decrease(2)" class='qtyminus' field='quantity' />
                            <input type='text' rel="2" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' onclick="Increase(2)" field='quantity' />
                        </form>
                    </p>
                </span>
            </div>

            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/microwave.png" alt="">
                </a>
                <h3>
                    <a rel="3" href="#">Microwave</a>
                </h3>
                <p rel="3">Power: 1200W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' onclick="Decrease(3)" class='qtyminus' field='quantity' />
                            <input type='text' rel="3" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' onclick="Increase(3)" class='qtyplus' field='quantity' />
                        </form>
                    </p>
                </span>
             </div>
        </div>
        <!-- /.row -->

        <!-- Projects Row -->
        <div class="row">
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/blender.png" alt="">
                </a>
                <h3>
                    <a rel="4" href="#">Blender</a>
                </h3>
                <p rel="4">Power: 600W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' onclick="Decrease(4)" field='quantity' />
                            <input type='text' rel="4" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' onclick="Increase(4)" field='quantity' />
                        </form>
                    </p>
                </span>
            </div>
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/lg-ac.png" alt="">
                </a>
                <h3>
                    <a rel="5" href="#">Air Conditioner</a>
                </h3>
                <p rel="5">Power: 1200W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' onclick="Decrease(5)" field='quantity' />
                            <input type='text' rel="5" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' onclick="Increase(5)" field='quantity' />
                        </form>
                    </p>
                </span>
            </div>
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/iron.png" alt="">
                </a>
                <h3>
                    <a rel="6" href="#">Iron</a>
                </h3>
                <p rel="6">Power: 1000W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' onclick="Decrease(6)" field='quantity' />
                            <input type='text' rel="6" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' onclick="Increase(6)" field='quantity' />
                        </form>
                    </p>
                </span>
            </div>
        </div>

        <!-- Projects Row -->
        <div class="row">
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/timer.png" alt="">
                </a>
                <h3>
                    <a rel="7" href="#">Timer</a>
                </h3>
                <p rel="7">Power: 120W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' onclick="Decrease(7)" field='quantity' />
                            <input type='text' rel="7" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' onclick="Increase(7)" field='quantity' />
                        </form>
                    </p>
                </span>
            </div>
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/light-bulb.png" alt="">
                </a>
                <h3>
                    <a rel="8" href="#">Light Bulb</a>
                </h3>
                <p rel="8">Power: 100watts</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' onclick="Decrease(8)" field='quantity' />
                            <input type='text' rel="8" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' onclick="Increase(8)" field='quantity' />
                        </form>
                    </p>
                </span>
            </div>
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/hair-dryer.png" alt="">
                </a>
                <h3>
                    <a rel="9" href="#">Hair Dryer</a>
                </h3>
                <p rel="9">Power: 2000W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' onclick="Decrease(9)" field='quantity' />
                            <input type='text' rel="9" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' onclick="Increase(9)" field='quantity' />
                        </form>
                    </p>
                </span>
            </div>
        </div>
        <!-- /.row -->


        <!-- Projects Row -->
        <div class="row">
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/microwave.png" alt="">
                </a>
                <h3>
                    <a href="#" rel="10">Microwave</a>
                </h3>
                <p rel="10">Power: 120W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' onclick="Decrease(10)" field='quantity' />
                            <input type='text' rel="10" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' field='quantity' onclick="Increase(10)"/>
                        </form>
                    </p>
                </span>
            </div>
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/toaster.png" alt="">
                </a>
                <h3>
                    <a href="#" rel="11">Oven</a>
                </h3>
                <p rel="11">Power: 100watts</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' onclick="Decrease(11)" field='quantity' />
                            <input type='text' rel="11" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' onclick="Increase(11)" field='quantity' />
                        </form>
                    </p>
                </span>
            </div>
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/water-dispenser.png" alt="">
                </a>
                <h3>
                    <a href="#" rel="12">Water Dispenser</a>
                </h3>
                <p rel="12">Power: 80W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' onclick="Decrease(12)" field='quantity' />
                            <input type='text' rel="12" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' field='quantity' onclick="Increase(11)"/>
                        </form>
                    </p>
                </span>
            </div>
        </div>
        <!-- /.row -->

         <!-- Projects Row -->
        <div class="row">
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/ceiling-fan.png" alt="">
                </a>
                <h3>
                    <a href="#" rel="13">Ceiling Fan</a>
                </h3>
                <p rel="13">Power: 50W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' field='quantity' onclick="Decrease(13)"/>
                            <input type='text' rel="13" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' field='quantity' onclick="Increase(13)"/>
                        </form>
                    </p>
                </span>
            </div>
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/submersible.png" alt="">
                </a>
                <h3>
                    <a rel="14" href="#">Submersible Water Pump</a>
                </h3>
                <p rel="14">Power: 400watts</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' field='quantity' onclick="Decrease(14)"/>
                            <input type='text' rel="14" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' field='quantity' onclick="Increase(14)"/>
                        </form>
                    </p>
                </span>
            </div>
            <div class="col-md-4 portfolio-item">
                <a href="#">
                    <img class="img-responsive" src="/static/img/sand.png" alt="">
                </a>
                <h3 >
                    <a rel="15" href="#">9" Inch Disc Sander</a>
                </h3>
                <p rel="15">Power: 1200W</p>
                <span>
                    <p>Quantity:
                        <form id='myform' method='POST' action='#'>
                            <input type='button' value='-' class='qtyminus' field='quantity' onclick="Decrease(15)"/>
                            <input type='text' rel="15" name='quantity' value='0' class='qty' />
                            <input type='button' value='+' class='qtyplus' field='quantity' onclick="Increase(15)"/>
                        </form>
                    </p>
                </span>
            </div>
        </div>
        <hr>
        <hr>

        <!-- Footer -->
        <footer>
            <div class="row">
                <div class="col-lg-12">
                    <!-- <p>Copyright &copy; Your Website 2014</p> -->
                </div>
            </div>
            <!-- /.row -->
        </footer>

    </div>
    <!-- /.container -->

    <!-- jQuery -->
    <script src="/static/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/static/js/bootstrap.min.js"></script>

    <script src= "/static/js/increment.js"></script>

    <script>

    Power = 0;
    ids = [];

    function Increase(id){
        // Get the field name
        // Get its current value
        var currentVal = parseInt($('input[rel='+id+']').val());
        // If is not undefined
        if (!isNaN(currentVal)) {
            // Increment
            $('input[rel='+id+']').val(currentVal + 1);
        } else {
            // Otherwise put a 0 there
            $('input[rel='+id+']').val(0);
        }
        GlobalPower(id=id, inc=true);
        appendItems(id);
    };

    // This button will decrement the value till 0
    function Decrease(id) {
        // Get its current value
        var currentVal = parseInt($('input[rel='+id+']').val());
        // If it isn't undefined or its greater than 0
        if (!isNaN(currentVal) && currentVal > 0) {
            // Decrement one
            $('input[rel='+id+']').val(currentVal - 1);
            GlobalPower(id=id, inc=false);
            removeItems(id);
        } else {
            // Otherwise put a 0 there
            $('input[rel='+id+']').val(0);
        }
    };

    function GlobalPower(id, inc){
      if (inc){
      // Power = Power + $('p[rel='+id+"]").val().match(/\d+\);
      Power = Power + parseInt($('p[rel='+id+']').text().replace(/[^0-9\.]/g, ''), 10);
    } else {
      // Power = Power - $('p[rel='+id+"]").val().match(/\d+\);
      Power = Power - parseInt($('p[rel='+id+']').text().replace(/[^0-9\.]/g, ''), 10);
    }

    Monitor(Power);
    };

    function Monitor(Power){
      $("#total_power").text(Power + " Watts");
      if( Power > {{Power}}){
        $("#total_power").css('color', 'red');
      } else {
        $("#total_power").css('color', 'blue');
      }
    }

    function appendItems(id){
      if(ids.includes(id)){
        var quant = parseInt($('input[rel='+id+']').val());
        var item = $('a[rel='+id+']').text();
        $('li[rel='+id+']').text(quant +"  "+ item);
        console.log($('li[rel='+id+']').text());
      } else {
        var quant = parseInt($('input[rel='+id+']').val());
        var item = $('a[rel='+id+']').text();
        console.log(item);
        $("#items").append("<li style='color:grey' rel="+id+">"+ quant +" "+ item +"<li>");
        ids.push(id);
      }
    }

    function removeItems(id){
      if(ids.includes(id)){
        var quant = parseInt($('input[rel='+id+']').val());
        var item = $('a[rel='+id+']').text();
        if (quant < 1){
          $('li[rel='+id+']').remove();
          ids.pop(id);
        } else {
          $('li[rel='+id+']').text(quant +"  "+ item);
        }
      }
    }
    </script>

</body>

</html>
